---
alwaysApply: true
appliesTo:
  - "**/*.ts"
  - "**/*.tsx"
  - "**/*.mts"
  - "**/*.cts"
---

# TypeScript ç¼–ç è§„èŒƒ

## è§„èŒƒè¯´æ˜

æœ¬è§„èŒƒåŸºäºæ·±å…¥çš„ TypeScript è¯­è¨€ç‰¹æ€§åˆ†æå’Œå¤§è§„æ¨¡é¡¹ç›®å®è·µï¼Œå®šä¹‰äº† TypeScript ç‰¹æœ‰ç±»å‹ç³»ç»Ÿçš„ç¼–ç æ ‡å‡†ã€‚è§„èŒƒä¸“æ³¨äº Enumã€Interfaceã€è”åˆç±»å‹ç­‰ TypeScript ä¸“æœ‰ç‰¹æ€§çš„æœ€ä½³å®è·µï¼Œç¡®ä¿ç±»å‹å®‰å…¨ã€ä»£ç å¯è¯»æ€§å’Œç»´æŠ¤æ€§ã€‚

> ğŸ’¡ **æ³¨æ„**: é€šç”¨çš„ JavaScript æ ‡è¯†ç¬¦å‘½åï¼ˆå˜é‡ã€å‡½æ•°ã€ç±»ç­‰ï¼‰è¯·å‚è€ƒ `code-naming.mdc`

### ğŸ¯ æ ¸å¿ƒä¾æ®

- **TypeScript å®˜æ–¹æ–‡æ¡£** - TypeScript Handbook ä¸­çš„ç±»å‹ç³»ç»Ÿå’Œæœ€ä½³å®è·µæŒ‡å¯¼
- **ä¸»æµå¼€æºé¡¹ç›®å®è·µ** - Reactã€Vueã€Angularã€VS Codeã€TypeORM ç­‰é¡¶çº§ TypeScript é¡¹ç›®çš„ç±»å‹å®šä¹‰æ¨¡å¼
- **ç±»å‹å®‰å…¨åŸåˆ™** - å¼ºç±»å‹ç³»ç»Ÿçš„å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡ä¼˜åŒ–
- **ç°ä»£ TypeScript ç‰¹æ€§** - åŸºäº TypeScript 4.0+ çš„ç°ä»£è¯­æ³•å’Œç¼–è¯‘å™¨ä¼˜åŒ–
- **ä¼ä¸šçº§é¡¹ç›®ç»éªŒ** - å¤§å‹ TypeScript é¡¹ç›®ä¸­çš„ç±»å‹è®¾è®¡æ¨¡å¼å’Œå›¢é˜Ÿåä½œå®è·µ

## Enum å‘½åè§„èŒƒ

### ğŸ† æ ¸å¿ƒåŸåˆ™

1. **è¯­ä¹‰åŒ–ä¼˜å…ˆ** - åç§°åº”æ¸…æ™°è¡¨è¾¾ç”¨é€”å’Œä¸Šä¸‹æ–‡
2. **ä¸€è‡´æ€§** - å›¢é˜Ÿå†…ä¿æŒç»Ÿä¸€çš„å‘½åé£æ ¼
3. **å¯è¯»æ€§** - è®©å…¶ä»–å¼€å‘è€…ä¸€ç›®äº†ç„¶

### ğŸ“› åŸºç¡€å‘½åè§„åˆ™

#### 1. æšä¸¾ç±»å‹å‘½å

- **ä½¿ç”¨ PascalCase**
- **ä½¿ç”¨å•æ•°å½¢å¼**
- **è¯­ä¹‰å®Œæ•´æ€§**

```typescript
// âœ… æ­£ç¡®
enum UserRole { ... }
enum OrderStatus { ... }
enum HttpStatusCode { ... }

// âŒ é¿å…
enum UserRoles { ... }        // é”™è¯¯ï¼šå¤æ•°å½¢å¼
enum user_role { ... }        // é”™è¯¯ï¼šsnake_case
enum httpStatusCode { ... }   // é”™è¯¯ï¼šå°å†™å¼€å¤´
```

#### 2. æšä¸¾æˆå‘˜å‘½å

**ä½¿ç”¨ PascalCase**ï¼ˆç°ä»£ä¸»æµé£æ ¼ï¼‰

```typescript
// âœ… æ­£ç¡®ï¼šPascalCase å‘½å
enum Color {
  Red = "RED",
  Blue = "BLUE",
  Green = "GREEN",
}

enum UserStatus {
  Active = "active",
  Inactive = "inactive",
  Suspended = "suspended",
}
```

### ğŸ¯ ç‰¹å®šåœºæ™¯å‘½åæŒ‡å—

#### 1. çŠ¶æ€æšä¸¾

ä½¿ç”¨ `[å®ä½“]Status` æ ¼å¼ï¼š

```typescript
// âœ… è®¢å•çŠ¶æ€
enum OrderStatus {
  Pending = "pending", // å¾…å¤„ç†
  Processing = "processing", // å¤„ç†ä¸­
  Shipped = "shipped", // å·²å‘è´§
  Delivered = "delivered", // å·²é€è¾¾
  Cancelled = "cancelled", // å·²å–æ¶ˆ
}
```

#### 2. è§’è‰²/æƒé™æšä¸¾

ä½¿ç”¨ `[ç³»ç»Ÿ]Role` æ ¼å¼ï¼š

```typescript
// âœ… ç³»ç»Ÿè§’è‰²
enum SystemRole {
  Administrator = "admin", // ç®¡ç†å‘˜
  Editor = "editor", // ç¼–è¾‘
  Contributor = "contributor", // è´¡çŒ®è€…
  Viewer = "viewer", // æŸ¥çœ‹è€…
}
```

#### 3. é”™è¯¯ä»£ç æšä¸¾

ä½¿ç”¨åˆ†ç±»å‰ç¼€ + `ErrorCode` æ ¼å¼ï¼š

```typescript
// âœ… APIé”™è¯¯ä»£ç 
enum ApiErrorCode {
  // è®¤è¯é”™è¯¯ (1000ç³»åˆ—)
  AuthenticationFailed = 1001,
  InvalidToken = 1002,
  TokenExpired = 1003,

  // èµ„æºé”™è¯¯ (2000ç³»åˆ—)
  ResourceNotFound = 2001,
  PermissionDenied = 2002,

  // éªŒè¯é”™è¯¯ (3000ç³»åˆ—)
  ValidationFailed = 3001,
  InvalidInput = 3002,
}
```

#### 4. é…ç½®é€‰é¡¹æšä¸¾

ä½¿ç”¨åŠŸèƒ½ + é€‰é¡¹æ ¼å¼ï¼š

```typescript
// âœ… æ—¥å¿—çº§åˆ«
enum LogLevel {
  Debug = "debug", // è°ƒè¯•
  Info = "info", // ä¿¡æ¯
  Warn = "warn", // è­¦å‘Š
  Error = "error", // é”™è¯¯
  Critical = "critical", // ä¸¥é‡
}
```

### ğŸ¯ å‘½åå†³ç­–æµç¨‹

```mermaid
graph TD
    A[éœ€è¦å®šä¹‰æšä¸¾ï¼Ÿ] --> B{æšä¸¾ç”¨é€”æ˜¯ä»€ä¹ˆï¼Ÿ}
    B -->|çŠ¶æ€ç®¡ç†| C["[å®ä½“]Status"]
    B -->|è§’è‰²/æƒé™| D["[ç³»ç»Ÿ]Role"]
    B -->|é”™è¯¯ä»£ç | E["[åˆ†ç±»]ErrorCode"]
    B -->|é…ç½®é€‰é¡¹| F["[åŠŸèƒ½] + é€‰é¡¹"]
    C --> G[ä½¿ç”¨ PascalCase]
    D --> G
    E --> G
    F --> G
    G --> H{æ˜¯å­—ç¬¦ä¸²æšä¸¾ï¼Ÿ}
    H -->|æ˜¯| I[æ˜¾å¼èµ‹å€¼å­—ç¬¦ä¸²å€¼]
    H -->|å¦| J[è€ƒè™‘æ˜¯å¦ä½¿ç”¨æ•°å­—å€¼]

    style G fill:#e8f5e8
    style I fill:#e3f2fd
    style J fill:#fff3e0
```

### âŒ é¿å…çš„å¸¸è§é”™è¯¯

```typescript
// âŒ è¿‡äºæ³›åŒ–çš„åç§°
enum Status { ... }  // ç¼ºä¹ä¸Šä¸‹æ–‡ï¼Œåº”ä¸º PaymentStatus
enum Type { ... }    // å¤ªæ³›åŒ–ï¼Œåº”ä¸º FileType

// âŒ ä¸å¿…è¦çš„ç¼©å†™
enum CustType { ... }  // ä¸æ¸…æ™°ï¼Œåº”ä¸º CustomerType
enum ProdStat { ... }  // æ¨¡ç³Šï¼Œåº”ä¸º ProductStatus

// âŒ ä¸ä¸€è‡´çš„å‘½åé£æ ¼
enum Color {
  red,     // å°å†™
  BLUE,    // å¤§å†™
  Green,   // é¦–å­—æ¯å¤§å†™
}

// âŒ å­—ç¬¦ä¸²æšä¸¾ç¼ºå°‘æ˜¾å¼èµ‹å€¼
enum Direction {
  North,   // é”™è¯¯ï¼šå­—ç¬¦ä¸²æšä¸¾éœ€è¦åˆå§‹åŒ–
  South,   // é”™è¯¯ï¼šåº”ä¸º South = "SOUTH"
}
```

### ğŸ’¡ é«˜çº§æŠ€å·§

#### 1. å¸¸é‡æšä¸¾ä¼˜åŒ–æ€§èƒ½

```typescript
// ç¼–è¯‘æ—¶å†…è”ï¼Œæå‡æ€§èƒ½
const enum Size {
  Small = "SM",
  Medium = "MD",
  Large = "LG",
}
```

#### 2. è”åˆç±»å‹æ›¿ä»£æ–¹æ¡ˆ

```typescript
// é›¶è¿è¡Œæ—¶å¼€é”€çš„è½»é‡çº§æšä¸¾
const UserRole = {
  Admin: "ADMIN",
  Editor: "EDITOR",
} as const;

type UserRole = (typeof UserRole)[keyof typeof UserRole];
```

> **é»„é‡‘æ³•åˆ™**ï¼šæšä¸¾åç§°åº”è¯¥è®©å¼€å‘è€…æ— éœ€æŸ¥çœ‹å®ç°å°±èƒ½ç†è§£å…¶ç›®çš„å’Œç”¨æ³•

## Interface å‘½åè§„èŒƒ

### æ¥å£åè§„åˆ™

1. **PascalCase å‘½å**
   - âœ… `UserProfile` - é¦–å­—æ¯å¤§å†™ï¼Œæ— åˆ†éš”ç¬¦
   - âŒ `userProfile` - å°å†™å¼€å¤´

2. **è¯­ä¹‰åŒ–çš„åè¯**
   - âœ… `DataParser` - è¡¨ç¤ºè§£æå™¨çš„ç±»å‹
   - âœ… `PaymentStrategy` - è¡¨ç¤ºç­–ç•¥æ¨¡å¼ä¸­çš„ç­–ç•¥ç±»å‹

3. **é¿å…å†—ä½™å‰ç¼€**
   - âœ… `User` - ç®€æ´æ˜ç¡®
   - âŒ `IUser` - å†—ä½™çš„ I å‰ç¼€

4. **ç²¾ç¡®æè¿°èŒƒå›´**
   - âœ… `ApiResponse<T>` - æ˜ç¡®ç”¨äº API å“åº”
   - âœ… `AppState` - è¡¨ç¤ºå…¨å±€çŠ¶æ€

### æ¥å£å±æ€§è§„åˆ™

1. **camelCase å‘½å**
   - âœ… `firstName`, `createdAt` - å°é©¼å³°å¼
   - âŒ `FirstName`, `created_at` - å¤§å†™å¼€å¤´æˆ–ä¸‹åˆ’çº¿

2. **æ˜ç¡®è¯­ä¹‰ï¼Œé¿å…ç¼©å†™**
   - âœ… `maxRetryAttempts` - æ¸…æ™°å®Œæ•´
   - âœ… `timeoutMs` - å¸¦å•ä½è¯´æ˜
   - âŒ `mxRtAtmpt` - æ¨¡ç³Šç¼©å†™

3. **å¸ƒå°”å€¼ä½¿ç”¨è¯­ä¹‰å‰ç¼€**
   - âœ… `isEnabled`, `hasPermission` - æ˜ç¡®å¸ƒå°”æ„å›¾
   - âŒ `enable`, `permission` - ç¼ºå°‘è¯­ä¹‰å‰ç¼€

4. **é›†åˆç±»å‹ä½¿ç”¨å¤æ•°å½¢å¼**

é›†åˆç±»å‹å±æ€§åº”ä½¿ç”¨å¤æ•°å½¢å¼ï¼Œé¿å…åœ¨å˜é‡åä¸­é‡å¤ç±»å‹ä¿¡æ¯ï¼š

#### ğŸ¯ æ ¸å¿ƒåŸåˆ™ï¼šç±»å‹ä¿¡æ¯ä¸é‡å¤

```typescript
// âœ… æ¨èï¼šå¤æ•°å½¢å¼å·²ç»è¡¨è¾¾äº†é›†åˆå«ä¹‰
interface ProductStore {
  items: Product[]; // è€Œä¸æ˜¯ itemList
  users: User[]; // è€Œä¸æ˜¯ userArray
  discounts: Map<string, number>; // è€Œä¸æ˜¯ discountMap
  categories: Set<string>; // è€Œä¸æ˜¯ categorySet
}

// âŒ é¿å…ï¼šå†—ä½™åç¼€
interface ProductStore {
  itemList: Product[]; // å†—ä½™ï¼šç±»å‹å·²è¯´æ˜æ˜¯æ•°ç»„
  userArray: User[]; // å†—ä½™ï¼šArray åç¼€å¤šä½™
  discountMap: Map<string, number>; // å†—ä½™ï¼šMap åç¼€å¤šä½™
}
```

#### ğŸ’¡ å¤æ•°å½¢å¼çš„ä¼˜åŠ¿

1. **é¿å…ä¿¡æ¯å†—ä½™** - `Product[]` ç±»å‹å·²æ˜ç¡®è¡¨ç¤ºæ•°ç»„ç»“æ„
2. **æ›´è‡ªç„¶çš„è¯­ä¹‰** - `items` æ¯” `itemList` è¯»èµ·æ¥æ›´è‡ªç„¶
3. **çµæ´»æ€§æ›´å¥½** - æ”¹å˜æ•°æ®ç»“æ„æ—¶å˜é‡åä»ç„¶åˆé€‚
4. **éµå¾ªä¸šç•Œæœ€ä½³å®è·µ** - ä¸»æµä»£ç åº“çš„å¸¸è§æ¨¡å¼

### æ ‡å‡†æ ¼å¼

```typescript
// âœ… æœ€ä½³å®è·µï¼šæ˜ç¡®æè¿°å¯¹è±¡ç±»å‹
interface UserProfile {
  id: string;
  firstName: string;
  isActive: boolean;
  permissions: string[];
}

interface HttpClientConfig {
  timeoutMs: number;
  maxRetryAttempts: number;
  isRetryEnabled: boolean;
}

// âŒ é¿å…ï¼šä¸è§„èŒƒçš„å‘½å
interface IUserProfile {
  // é”™è¯¯ï¼šå†—ä½™ I å‰ç¼€
  FirstName: string; // é”™è¯¯ï¼šå¤§å†™å¼€å¤´
  created_at: Date; // é”™è¯¯ï¼šsnake_case
  enable: boolean; // é”™è¯¯ï¼šç¼ºå°‘è¯­ä¹‰å‰ç¼€
  itemList: Product[]; // é”™è¯¯ï¼šå†—ä½™ List åç¼€
}
```

## è”åˆç±»å‹å‘½åè§„èŒƒ

### ğŸ† æ ¸å¿ƒåŸåˆ™

1. **è¯­ä¹‰åŒ–å‘½å** - ç±»å‹ååº”æ¸…æ™°è¡¨è¾¾è”åˆç±»å‹çš„ç”¨é€”
2. **å¯è¾¨è¯†æ€§** - ä¼˜å…ˆä½¿ç”¨å¯è¾¨è¯†è”åˆæ¨¡å¼
3. **ç±»å‹å®‰å…¨** - ç¡®ä¿ç©·å°½æ€§æ£€æŸ¥å’Œç±»å‹æ”¶çª„

### ğŸ“› åŸºç¡€å‘½åè§„åˆ™

#### 1. è”åˆç±»å‹å‘½å

- **ä½¿ç”¨ PascalCase**
- **è¯­ä¹‰å®Œæ•´æ€§**
- **é¿å…è¿‡åº¦æ³›åŒ–**

```typescript
// âœ… æ­£ç¡®ï¼šè¯­ä¹‰æ¸…æ™°çš„è”åˆç±»å‹
type PaymentMethod = "creditCard" | "paypal" | "bankTransfer";
type UserRole = "admin" | "editor" | "viewer";
type LogLevel = "debug" | "info" | "warn" | "error";

// âŒ é¿å…ï¼šæ¨¡ç³Šçš„å‘½å
type Options = string | number;
type Types = "A" | "B";
type Data = boolean | null;
```

#### 2. å¯è¾¨è¯†è”åˆæ¨¡å¼

**ä½¿ç”¨å…¬å…±å­—æ®µä½œä¸ºåˆ¤åˆ«å¼**

```typescript
// âœ… æ¨èï¼šæ ‡å‡†å¯è¾¨è¯†è”åˆ
type ApiResponse<T> =
  | { status: "success"; data: T }
  | { status: "error"; code: number; message: string }
  | { status: "loading" };

// âœ… æ¨èåˆ¤åˆ«å­—æ®µåï¼škind, type, status
type NetworkEvent = { kind: "connected"; ip: string } | { kind: "disconnected"; reason: string };
```

#### 3. å­—é¢é‡è”åˆè§„èŒƒ

```typescript
// âœ… æ¨èï¼šä½¿ç”¨å¸¸é‡é¿å…é­”æ³•å­—ç¬¦ä¸²
const THEMES = ["light", "dark", "high-contrast"] as const;
type Theme = (typeof THEMES)[number];

// âœ… æ¨èï¼šæè¿°æ€§å­—é¢å€¼
type Environment = "development" | "staging" | "production";

// âŒ é¿å…ï¼šæ¨¡ç³Šçš„å­—é¢å€¼
type Mode = "a" | "b" | "c";
```

### ğŸ“ è”åˆç±»å‹æ ¼å¼åŒ–è§„èŒƒ

#### ğŸ¯ å‰ç½® `|` æ ¼å¼ï¼ˆæ¨èï¼‰

**å¯¹äºå¤šè¡Œè”åˆç±»å‹ï¼Œä¼˜å…ˆä½¿ç”¨å‰ç½® `|` æ ¼å¼**ï¼š

```typescript
// âœ… æ¨èï¼šå¤šè¡Œè”åˆç±»å‹ä½¿ç”¨å‰ç½® |
type ApiResponse<T> =
  | { status: "success"; data: T }
  | { status: "error"; code: number; message: string }
  | { status: "loading" };

type UserAction =
  | { type: "login"; username: string }
  | { type: "logout" }
  | { type: "update"; data: UserData }
  | { type: "refresh" };

// âœ… å•è¡Œè”åˆç±»å‹å¯ä»¥çœç•¥å‰ç½® |
type Status = "pending" | "completed" | "failed";
type ID = string | number;
```

#### ğŸ† å‰ç½® `|` çš„ä¼˜åŠ¿

1. **è§†è§‰å¯¹é½æ¸…æ™°**

   ```typescript
   // âœ… å¯¹é½æ¸…æ™°ï¼Œä¸€ç›®äº†ç„¶
   type NetworkEvent =
     | { kind: "connected"; ip: string; timestamp: Date }
     | { kind: "disconnected"; reason: string; timestamp: Date }
     | { kind: "error"; error: Error; retryCount: number };
   ```

2. **æ˜“äºç»´æŠ¤ä¿®æ”¹**

   ```typescript
   // âœ… æ·»åŠ /åˆ é™¤/æ³¨é‡Šç±»å‹å¾ˆæ–¹ä¾¿
   type UserRole =
     | { role: "admin"; permissions: AdminPermissions }
     | { role: "editor"; permissions: EditorPermissions }
     // | { role: "viewer"; permissions: ViewerPermissions } // ä¸´æ—¶æ³¨é‡Š
     | { role: "guest"; permissions: {} };
   ```

3. **Git diff æ›´å‹å¥½**

   ```diff
   type UserStatus =
     | { status: "active"; lastLogin: Date }
     | { status: "inactive"; reason: string }
   + | { status: "suspended"; until: Date }
     | { status: "pending"; verificationCode: string };
   ```

4. **ç¬¦åˆå·¥å…·é»˜è®¤æ ¼å¼**
   - Prettier ä¼šè‡ªåŠ¨æ ¼å¼åŒ–ä¸ºå‰ç½® `|` å½¢å¼
   - ç¬¦åˆ TypeScript å®˜æ–¹æ¨èæ ¼å¼
   - ä¸ä¸»æµå¼€æºé¡¹ç›®ä¿æŒä¸€è‡´

#### ğŸ“ æ ¼å¼åŒ–å†³ç­–è§„åˆ™

```typescript
// âœ… ç®€å•è”åˆï¼ˆå•è¡Œï¼‰
type Size = "small" | "medium" | "large";

// âœ… å¤æ‚è”åˆï¼ˆå¤šè¡Œ + å‰ç½® |ï¼‰
type FormState =
  | {
      stage: "editing";
      data: FormData;
      errors: ValidationErrors;
    }
  | {
      stage: "submitting";
      data: FormData;
    }
  | {
      stage: "success";
      result: SubmissionResult;
    };
```

### ç±»å‹å®‰å…¨å®è·µ

#### 1. ç©·å°½æ€§æ£€æŸ¥

```typescript
// âœ… ä½¿ç”¨ never ç±»å‹ç¡®ä¿è¦†ç›–æ‰€æœ‰æƒ…å†µ
function processStatus(status: ApiResponse<any>): void {
  switch (status.status) {
    case "success":
      // å¤„ç†æˆåŠŸ
      break;
    case "error":
      // å¤„ç†é”™è¯¯
      break;
    case "loading":
      // å¤„ç†åŠ è½½
      break;
    default:
      // ç¡®ä¿è¦†ç›–æ‰€æœ‰æƒ…å†µ
      const _exhaustiveCheck: never = status;
      throw new Error(`Unhandled status: ${_exhaustiveCheck}`);
  }
}
```

#### 2. ç±»å‹ä¿æŠ¤

```typescript
// âœ… åˆ›å»ºç±»å‹ä¿æŠ¤å‡½æ•°
function isSuccess<T>(response: ApiResponse<T>): response is { status: "success"; data: T } {
  return response.status === "success";
}

// ä½¿ç”¨
if (isSuccess(response)) {
  console.log(response.data); // ç±»å‹å®‰å…¨
}
```

### æ ‡å‡†æ ¼å¼

```typescript
// âœ… æœ€ä½³å®è·µï¼šå®Œæ•´çš„è”åˆç±»å‹åº”ç”¨
export const USER_ROLES = ["admin", "editor", "viewer"] as const;
export type UserRole = (typeof USER_ROLES)[number];

export type UserPermissions =
  | { role: "admin"; permissions: { canDelete: boolean; canConfigure: boolean } }
  | { role: "editor"; permissions: { canEdit: boolean; canPublish: boolean } }
  | { role: "viewer"; permissions: { canView: boolean } };

// âœ… æ³›å‹è”åˆç±»å‹
export type Result<T, E = Error> = { success: true; data: T } | { success: false; error: E };

// âœ… æ¨èï¼šé‡æ„ä¸ºå¯æ‰©å±•ç»“æ„
type Badge = {
  material: "bronze" | "silver" | "gold";
  level: 1 | 2 | 3;
};

// âŒ é¿å…ï¼šè¿‡å¤§çš„è”åˆç±»å‹
type BadgeLevel = "bronze1" | "bronze2" | "bronze3" | "silver1" | "silver2" | "silver3" | "gold1" | "gold2" | "gold3"; // å¤ªå¤šé€‰é¡¹ï¼Œè€ƒè™‘é‡æ„
```
